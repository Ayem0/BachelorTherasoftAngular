<div class="backdrop-blur fixed left-0 top-0 right-0 z-50 p-2 md:px-4 bg-transparent/05 dark:transparent/05">
    <div class="flex justify-between">
        <div class="flex items-center gap-2">
            <button mat-icon-button aria-label="Menu" (click)="toggleMenu()">
                <mat-icon>menu</mat-icon>
            </button>
            <a routerLink="/" class="flex flex-row gap-2 items-center">
                <img src="logo/taskify_logo.png" alt="logo" class="size-6">
                <h1 class="dark:text-white text-2xl hidden sm:block">Taskify</h1>
            </a>
        </div>
        <div class="flex items-center gap-2">
            @if (!isLoggedIn()) {
            <a routerLink="/login" mat-stroked-button aria-label="Login">Login</a>
            <a routerLink="/register" mat-flat-button aria-label="Register">Register</a>
            }
            <button matTooltip="Settings" mat-icon-button [matMenuTriggerFor]="settings" aria-label="Settings Menu">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #settings>
                <button mat-menu-item [matMenuTriggerFor]="theme" aria-label="Theme Menu">
                    <mat-icon>contrast</mat-icon>
                    <span>Appearance</span>
                </button>
                <mat-menu #theme>
                    <button mat-menu-item aria-label="Dark" (click)="setTheme('dark')">
                        <mat-icon>dark_mode</mat-icon>
                        <span>Dark</span>
                    </button>
                    <button mat-menu-item aria-label="Light" (click)="setTheme('light')">
                        <mat-icon>light_mode</mat-icon>
                        <span>Light</span>
                    </button>
                </mat-menu>

                <button mat-menu-item [matMenuTriggerFor]="language" aria-label="Language Menu">
                    <mat-icon>translate</mat-icon>
                    <span>Language</span>
                </button>
                <mat-menu #language>
                    <button mat-menu-item aria-label="French" aria-label="French" (click)="setLang('fr')">
                        <mat-icon>language_french</mat-icon>
                        <span>French</span>
                    </button>
                    <button mat-menu-item aria-label="English" aria-label="English" (click)="setLang('en')">
                        <mat-icon>language_gb_english</mat-icon>
                        <span>English</span>
                    </button>
                </mat-menu>
                <button mat-menu-item [matMenuTriggerFor]="timezone" aria-label="Language Menu">
                    <mat-icon>schedule</mat-icon>
                    <span>Timezone</span>
                </button>
                <mat-menu #timezone>
                    @for (timezone of timezones; track $index) {
                    <button mat-menu-item aria-label="Timezone" (click)="setTz(timezone)">
                        <span>{{ timezone }}</span>
                    </button>
                    }
                </mat-menu>
            </mat-menu>
            @if (isLoggedIn()) {
            <app-notification-menu></app-notification-menu>

            <button matTooltip="Messages" mat-icon-button aria-label="Messages">
                <mat-icon>forum</mat-icon>
            </button>

            <button mat-icon-button [matMenuTriggerFor]="profile" aria-label="Profile Menu">
                <mat-icon>account_circle</mat-icon>
            </button>
            <mat-menu #profile>
                <button mat-menu-item aria-label="Profile">
                    <mat-icon>account_box</mat-icon>
                    <span>Profile</span>
                </button>
                <button mat-menu-item aria-label="Profile Settings">
                    <mat-icon>manage_accounts</mat-icon>
                    <span>Settings</span>
                </button>
                <div class="border-b mx-1"></div>
                <button mat-menu-item aria-label="Logout" (click)="logout()">
                    <mat-icon>logout</mat-icon>
                    <span>Logout</span>
                </button>
            </mat-menu>
            }
        </div>
    </div>
</div>